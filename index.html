<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cavalo</title>
    <Link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;500;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="divEsq">
        <div class="divImg"><img
                src="https://images.pexels.com/photos/1524620/pexels-photo-1524620.jpeg?auto=compress&cs=tinysrgb&w=1260&h=750&dpr=1"
                alt=""></div>
    </div>
    <div class="divDir">
        <div id="div_qtd_cavalos" class="divMeio">
            Digite a quantidade de cavalos<input type="number" id="ipt_qtd_cavalos" />
            <button onclick="pegarQtdCavalo()">Próximo</button>
        </div>

        <div id="div_cavalos" class="divMeio">
            <p id="p_nome_cavalo"></p><input type="text" id="ipt_nome_cavalos" />
            <button onclick="cadastrar()">Próximo</button>
        </div>

        <div id="div_voltas" class="divMeio">
            Digite a quantidade de voltas
            <input type="number" id="ipt_voltas" />
            <button onclick="corrida()">Corrida</button>
        </div>

        <div id="div_msg"></div>
    </div>
</body>

</html>
<script>
    var cavalos = {
        nome: [],
        tmpTotal: [],
    };

    // DEFINIR JSON CAVALO PARA REFERENCIAR DEPOIS

    var erro = false;

    div_cavalos.style.display = 'none';
    div_voltas.style.display = 'none';

    function validacoes(qtdCavalo = 5, nomeCavalo = 'sergio', qtdVoltas = 1) { // cada parametro tem um valor padrao, para usar a funcao validacao use


        if (qtdCavalo < 2 || qtdCavalo > 6) {
            erro = true;

            alert('A quantidade de cavalos precisar estar entre dois e seis!');
        }

        if (nomeCavalo == '') {
            erro = true;

            alert('O nome do cavalo não pode estar vazio');
        }

        if (qtdVoltas <= 0) {
            erro = true;

            alert('A quantidade de voltas precisa ser maior do que zero!')
        }
    } // pega todos os inputs e valida, se der erro a variavel 'erro' fica igual a true

    function pegarQtdCavalo() {
        var qtdCavalo = ipt_qtd_cavalos.value;
        var nomeCavalo = ipt_nome_cavalos.value;

        validacoes(qtdCavalo);

        if (erro == false) {
            div_cavalos.style.display = 'flex';
            div_qtd_cavalos.style.display = 'none';

            p_nome_cavalo.innerHTML = `Digite o nome do cavalo `;
        }
    } // se não houverem erros pega o valor do input e da um .push() no array

    function cadastrar() {
        var qtdCavalo = ipt_qtd_cavalos.value;
        var nomeCavalo = ipt_nome_cavalos.value;

        validacoes(qtdCavalo, nomeCavalo);

        if (erro == false) {
            if (cavalos.nome.length < qtdCavalo - 1) {
                cavalos.nome.push(nomeCavalo);
            } else {
                cavalos.nome.push(nomeCavalo);
                div_cavalos.style.display = 'none';
                div_voltas.style.display = 'flex';
            }
            p_nome_cavalo.innerHTML = `Digite o nome do cavalo ${cavalos.nome.length + 1}`;
        }
    }

    var volta = 1

    function corrida() {

        var qtdCavalo = ipt_qtd_cavalos.value;
        var nomeCavalo = ipt_nome_cavalos.value;
        var qtdCavalo = ipt_qtd_cavalos.value; // ESSA É A QUANTIDADE DE CAVALOS
        var qtdVoltas = ipt_voltas.value;
        var menorTempo = 10; // ESSE É O MENOR TEMPO, ELE ESTÁ IGUAL A 10 PORQUE É MAIOR QUE 0
        var nCavalo = 0; // NÚMERO DO CAVALO COM O MENOR TEMPO



        validacoes(ipt_nome_cavalos, qtdCavalo, qtdVoltas);

        if (erro == false) {

            if (volta <= qtdVoltas) {
                div_msg.innerHTML += `<h1>Volta ${volta}</h1>`
                volta++

                for (i = 0; i < cavalos.nome.length; i++) {
                    var aleatorio = Math.random() * 2 + 7;

                    if (cavalos.tmpTotal[i] != undefined) {
                        cavalos.tmpTotal[i] += aleatorio;
                    } else {
                        cavalos.tmpTotal.push(aleatorio);
                    }

                    div_msg.innerHTML += `<br>Cavalo ${cavalos.nome[i]} - ${aleatorio.toFixed(2)} - ${cavalos.tmpTotal[i].toFixed(2)}`

                    console.log('a')
                }
            }
        }
    }










    /* function corrida() {
        var qtdCavalo = ipt_qtd_cavalos.value;
        var nomeCavalo = ipt_nome_cavalos.value;
        var qtdCavalo = ipt_qtd_cavalos.value; // ESSA É A QUANTIDADE DE CAVALOS
        var qtdVoltas = ipt_voltas.value;
        var menorTempo = 10; // ESSE É O MENOR TEMPO, ELE ESTÁ IGUAL A 10 PORQUE É MAIOR QUE 0
        var nCavalo = 0; // NÚMERO DO CAVALO COM O MENOR TEMPO

        validacoes(ipt_nome_cavalos, qtdCavalo, qtdVoltas);

        if (erro == false) {
            for (var y = 1; y <= qtdVoltas; y++) {
                console.log('a')
                // QUANTIDADE DE VOLTAS
                if (y == qtdVoltas) {
                    alert(`<h1><br> Cavalo vencedor ${nCavalo}</h1>`);
                } else {
                    alert(`<h1> Volta ${y}</h1><br>`);
                    for (var i = 0; i < qtdCavalo; i++) {
                        // SORTEAR O TEMPO PARA CADA CAVALO
                        var aleatorio = Math.random() * 2 + 7;
                        console.log(cavalos.tmpTotal);

                        if (cavalos.tmpTotal[i] != undefined) {
                            cavalos.tmpTotal[i] = tmpTotal[i] + aleatorio;
                        } else {
                            cavalos.tempTotal.push(aleatorio);
                        }

                        alert(`Cavalo ${i} - ${aleatorio.toFixed(2)} - ${cavalos.tmpTotal[i].toFixed(2)}`);

                        if (aleatorio < menorTempo) {
                            // PEGAR O MENOR TEMPO
                            menorTempo = aleatorio;
                            nCavalo = i;
                        }

                        console.log(`a`);
                    }

                    div_msg.innerHTML += ``;
                }
            }
        }
    } */ // pegar a quantidade de voltas e realizar o turfe

    function resultado() { } // pegar o array de tempo total e decidir o podio, mostrar as divs de resumo e corrida, varrer o array três vezes e pegar os três menores tempo.

    /* function validacao() {

        var qtdCavalos = ipt_qtd_cavalos.value;
        var nomeCavalo = ipt_cavalos.value;
        

        if (qtdCavalos <= 0) {
            erro = true;
            consolte.log('Favor inserir mais de um cavalo');
        }

        if (qtdCavalos > 5) {
            erro = true;
            console.log('A corrida pode ter no máximo 5 cavalos');
        }



    }

    function registrarCavalos() {

        validacao()
        if (erro == false) {

            let qtdCavalosCadastrados = 0;

            for (i = 0; i < qtdCavalos; i++) {
                if (qtdCavalos > 0) {
                    nomeCavaloX.innerHTML = `Insira o nome do cavalo ${i}`
                }
            }
        }
    }
 */
    /*  */
</script>